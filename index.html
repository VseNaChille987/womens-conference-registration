<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Church Women's Conference</title>
<style>
/* (Your previous CSS can remain the same) */
</style>
</head>
<body>
<div class="container">
<!-- HERO -->
<section class="hero">
  <img src="logo.png" alt="Conference logo" class="logo">
  <h1>Church Women’s Conference</h1>
  <p>Location • Saturday, Month Day, 2026 • 9:00 AM — 4:00 PM</p>
</section>

<!-- SPEAKER -->
<section class="card">
  <h2>Guest Speaker</h2>
  <div class="speaker">
    <img src="guest.jpg" alt="Oksana Grabchuk">
    <div class="details">
      <h3>Oksana Grabchuk</h3>
      <p class="muted">Pastor / Author / Speaker</p>
      <p class="bio">Oksana will share insights on spiritual growth and community building.</p>
    </div>
  </div>
</section>

<!-- SIGN UP -->
<section class="card">
  <h2>Sign Up</h2>
  <form id="signupForm">
    <label>Membership type</label>
    <select name="membershipType" id="membershipType" required>
      <option value="">Select...</option>
      <option value="Member">Member</option>
      <option value="Non-Member">Non-Member</option>
    </select>
    <p class="muted" id="costDisplay">Select member type to see cost.</p>

    <input type="text" name="firstName" placeholder="First Name" required>
    <input type="text" name="lastName" placeholder="Last Name" required>
    <input type="email" name="email" placeholder="Email" required>
    <input type="tel" name="phone" placeholder="Phone" required>

    <label>Which days can you attend?</label>
    <div class="checkbox-group">
      <label><input type="checkbox" name="days" value="Friday"> Friday</label>
      <label><input type="checkbox" name="days" value="Saturday"> Saturday</label>
    </div>

    <label>Payment Method</label>
    <select name="paymentMethod" id="paymentMethod" required>
      <option value="">Select payment method</option>
      <option value="PayPal">PayPal</option>
      <option value="Venmo">Venmo</option>
      <option value="Cash">Cash</option>
    </select>

    <div id="paymentInstructions" class="muted hidden"></div>
    <img id="paymentQR" class="hidden" alt="Payment QR code">

    <button type="submit" class="btn">Submit Registration</button>
  </form>
  <p class="muted" id="formMessage"></p>
</section>

<!-- QUESTIONS -->
<section class="card">
  <h2>Submit a Question</h2>
  <form id="questionForm">
    <textarea name="question" placeholder="Your question" rows="4" required></textarea>
    <button type="submit" class="btn">Submit Question</button>
    <p class="muted" id="questionMessage"></p>
  </form>
</section>
</div>

<script>
const webAppUrl = "https://script.google.com/macros/s/AKfycbwlU2lkNALPh8RuHaVXRH3R_FjagMS3tBcl3j2YYVy8qa19xpMPfH49VrIfSM7rfTpm/exec"; // <-- Replace this

// Membership cost
const membershipType = document.getElementById('membershipType');
const costDisplay = document.getElementById('costDisplay');
membershipType.addEventListener('change', ()=> {
  costDisplay.textContent = membershipType.value==="Member"? "Cost: $50":
                          membershipType.value==="Non-Member"? "Cost: $70":
                          "Select member type to see cost.";
});

// Payment instructions & QR
const paymentMethodSelect = document.getElementById('paymentMethod');
const paymentInstructions = document.getElementById('paymentInstructions');
const paymentQR = document.getElementById('paymentQR');
let currentPaymentLink = '';

paymentMethodSelect.addEventListener('change', ()=>{
  const val = paymentMethodSelect.value;
  paymentQR.classList.add('hidden');
  paymentInstructions.classList.add('hidden');

  if(val==="PayPal"){
    currentPaymentLink = "https://www.paypal.com/paypalme/YOUR_PAYPAL_LINK";
    paymentInstructions.innerHTML='Scan QR or click link to pay via PayPal.';
    paymentInstructions.classList.remove('hidden');
    paymentQR.src=`https://chart.googleapis.com/chart?cht=qr&chl=${encodeURIComponent(currentPaymentLink)}&chs=200x200&chld=L|0`;
    paymentQR.classList.remove('hidden');
  } else if(val==="Venmo"){
    currentPaymentLink = "https://venmo.com/YOUR_VENMO_HANDLE";
    paymentInstructions.innerHTML='Scan QR or click link to pay via Venmo.';
    paymentInstructions.classList.remove('hidden');
    paymentQR.src=`https://chart.googleapis.com/chart?cht=qr&chl=${encodeURIComponent(currentPaymentLink)}&chs=200x200&chld=L|0`;
    paymentQR.classList.remove('hidden');
  } else if(val==="Cash"){
    currentPaymentLink = '';
    paymentInstructions.innerHTML='Please bring cash to [Person/Location].';
    paymentInstructions.classList.remove('hidden');
  } else currentPaymentLink='';
});

// Signup form submission
document.getElementById('signupForm').addEventListener('submit', async (e)=>{
  e.preventDefault();
  const formMessage = document.getElementById('formMessage');
  formMessage.textContent="Submitting...";

  const data = new FormData(e.target);
  const payload={};
  data.forEach((v,k)=>{ if(k==='days'){ if(!payload[k]) payload[k]=[]; payload[k].push(v); } else payload[k]=v; });

  try{
    const res = await fetch(webAppUrl,{ method:'POST', body:JSON.stringify(payload), headers:{'Content-Type':'application/json'} });
    const result = await res.json();
    if(result.status==='success'){
      formMessage.textContent="Thank you! Preparing payment...";
      e.target.reset();
      costDisplay.textContent="Select member type to see cost.";
      paymentInstructions.classList.add('hidden');
      paymentQR.classList.add('hidden');
      if(currentPaymentLink) setTimeout(()=>window.location.href=currentPaymentLink,1500);
    } else formMessage.textContent="Error: "+result.message;
  }catch(err){ console.error(err); formMessage.textContent="Error submitting form. Check console for details.";}
});

// Questions form
document.getElementById('questionForm').addEventListener('submit', async (e)=>{
  e.preventDefault();
  const msg=document.getElementById('questionMessage');
  msg.textContent="Submitting...";
  const data=new FormData(e.target);
  const payload={question:data.get('question')};

  try{
    const res=await fetch(webAppUrl,{method:'POST',body:JSON.stringify(payload),headers:{'Content-Type':'application/json'}});
    const result=await res.json();
    if(result.status==='success'){ msg.textContent="Thank you! Your question has been submitted."; e.target.reset(); }
    else msg.textContent="Error: "+result.message;
  }catch(err){ console.error(err); msg.textContent="Error submitting question. Check console for details.";}
});
</script>
</body>
</html>

