<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2299.77">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!DOCTYPE html&gt;</p>
<p class="p1">&lt;html lang="en"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1">&lt;meta charset="utf-8"&gt;</p>
<p class="p1">&lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt;</p>
<p class="p1">&lt;title&gt;Admin - Edit Schedule&lt;/title&gt;</p>
<p class="p1">&lt;style&gt;</p>
<p class="p1">body{font-family:Inter,system-ui,-apple-system,'Segoe UI',Roboto,Arial;background:#fff6fb;padding:20px;color:#222;}</p>
<p class="p1">input,textarea,button{display:block;width:100%;padding:10px;margin-top:10px;border-radius:8px;border:1px solid #ccc;font-size:16px;}</p>
<p class="p1">button{background:#ff758c;color:white;border:none;cursor:pointer;}</p>
<p class="p1">textarea{height:300px;}</p>
<p class="p1">&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body&gt;</p>
<p class="p1">&lt;h1&gt;Admin - Edit Schedule&lt;/h1&gt;</p>
<p class="p1">&lt;input type="password" id="adminPassword" placeholder="Enter password"&gt;</p>
<p class="p1">&lt;button id="loginBtn"&gt;Login&lt;/button&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;div id="adminContent" class="hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;h2&gt;Schedule Items (one per line)&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;textarea id="scheduleText"&gt;&lt;/textarea&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;button id="saveBtn"&gt;Save to Airtable&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;p id="msg"&gt;&lt;/p&gt;</p>
<p class="p1">&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;script&gt;</p>
<p class="p1">const airtableToken="patYOUR_REAL_TOKEN";</p>
<p class="p1">const baseId="appP2cm5hgmoANQ7i";</p>
<p class="p1">const tableSchedule="tblSCHEDULE";</p>
<p class="p1">const adminPass="secret123"; // same as main</p>
<p class="p2"><br></p>
<p class="p1">document.getElementById('loginBtn').addEventListener('click',()=&gt;{</p>
<p class="p1"><span class="Apple-converted-space">  </span>if(document.getElementById('adminPassword').value===adminPass){</p>
<p class="p1"><span class="Apple-converted-space">    </span>document.getElementById('adminContent').classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">    </span>loadSchedule();</p>
<p class="p1"><span class="Apple-converted-space">  </span>} else alert("Incorrect password");</p>
<p class="p1">});</p>
<p class="p2"><br></p>
<p class="p1">// Load schedule from Airtable</p>
<p class="p1">async function loadSchedule(){</p>
<p class="p1"><span class="Apple-converted-space">  </span>try{</p>
<p class="p1"><span class="Apple-converted-space">    </span>const res=await fetch(`https://api.airtable.com/v0/${baseId}/${tableSchedule}`,{</p>
<p class="p1"><span class="Apple-converted-space">      </span>headers:{Authorization:`Bearer ${airtableToken}`}</p>
<p class="p1"><span class="Apple-converted-space">    </span>});</p>
<p class="p1"><span class="Apple-converted-space">    </span>const data=await res.json();</p>
<p class="p1"><span class="Apple-converted-space">    </span>let lines=[];</p>
<p class="p1"><span class="Apple-converted-space">    </span>data.records.forEach(r=&gt;{</p>
<p class="p1"><span class="Apple-converted-space">      </span>if(r.fields.Item) lines.push(r.fields.Item);</p>
<p class="p1"><span class="Apple-converted-space">    </span>});</p>
<p class="p1"><span class="Apple-converted-space">    </span>document.getElementById('scheduleText').value=lines.join("\n");</p>
<p class="p1"><span class="Apple-converted-space">  </span>} catch(e){console.error(e);}</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">// Save schedule to Airtable</p>
<p class="p1">document.getElementById('saveBtn').addEventListener('click',async()=&gt;{</p>
<p class="p1"><span class="Apple-converted-space">  </span>const items=document.getElementById('scheduleText').value.split("\n").filter(i=&gt;i.trim()!=="");</p>
<p class="p1"><span class="Apple-converted-space">  </span>document.getElementById('msg').textContent="Saving...";</p>
<p class="p1"><span class="Apple-converted-space">  </span>try{</p>
<p class="p1"><span class="Apple-converted-space">    </span>// Clear all records first (simplified approach)</p>
<p class="p1"><span class="Apple-converted-space">    </span>const res=await fetch(`https://api.airtable.com/v0/${baseId}/${tableSchedule}?maxRecords=100&amp;view=Grid view`,{</p>
<p class="p1"><span class="Apple-converted-space">      </span>headers:{Authorization:`Bearer ${airtableToken}`}</p>
<p class="p1"><span class="Apple-converted-space">    </span>});</p>
<p class="p1"><span class="Apple-converted-space">    </span>const data=await res.json();</p>
<p class="p1"><span class="Apple-converted-space">    </span>for(const rec of data.records){</p>
<p class="p1"><span class="Apple-converted-space">      </span>await fetch(`https://api.airtable.com/v0/${baseId}/${tableSchedule}/${rec.id}`,{</p>
<p class="p1"><span class="Apple-converted-space">        </span>method:'DELETE',</p>
<p class="p1"><span class="Apple-converted-space">        </span>headers:{Authorization:`Bearer ${airtableToken}`}</p>
<p class="p1"><span class="Apple-converted-space">      </span>});</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>// Add new items</p>
<p class="p1"><span class="Apple-converted-space">    </span>for(const i of items){</p>
<p class="p1"><span class="Apple-converted-space">      </span>await fetch(`https://api.airtable.com/v0/${baseId}/${tableSchedule}`,{</p>
<p class="p1"><span class="Apple-converted-space">        </span>method:'POST',</p>
<p class="p1"><span class="Apple-converted-space">        </span>headers:{Authorization:`Bearer ${airtableToken}`,'Content-Type':'application/json'},</p>
<p class="p1"><span class="Apple-converted-space">        </span>body:JSON.stringify({fields:{Item:i}})</p>
<p class="p1"><span class="Apple-converted-space">      </span>});</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>document.getElementById('msg').textContent="Schedule saved successfully!";</p>
<p class="p1"><span class="Apple-converted-space">  </span>} catch(e){document.getElementById('msg').textContent="Error saving schedule";console.error(e);}</p>
<p class="p1">});</p>
<p class="p1">&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
